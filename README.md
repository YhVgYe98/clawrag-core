# rag-core

åŸºäº Python + LanceDB çš„æœ¬åœ°å‘é‡æ•°æ®åº“ç®¡ç†å·¥å…·ã€‚

> **å…è´£å£°æ˜**ï¼šæœ¬å·¥å…·çš„ä»£ç ç”± AI Agent (å°å°è‹) è‡ªåŠ¨ç”Ÿæˆå¹¶ç»´æŠ¤ï¼Œæ—¨åœ¨æä¾›é«˜æ•ˆçš„æœ¬åœ°çŸ¥è¯†åº“ç®¡ç†æ–¹æ¡ˆã€‚ç”¨æˆ·åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­åº”è‡ªè¡Œè¯„ä¼°æ•°æ®å®‰å…¨é£é™©ã€‚

## ğŸš€ CLI è®¾è®¡è§„èŒƒ

å…¨å±€å‚æ•°ï¼š
- `-d, --db <PATH>` : æ•°æ®åº“æ ¹è·¯å¾„ (é»˜è®¤: `./rag_data`)
- `--api-url <URL>` : Embedding API çš„å®Œæ•´åœ°å€ (å¦‚ `http://.../v1/embeddings`)ã€‚**å¿…å¡«ï¼Œæ— é»˜è®¤å€¼ã€‚**
- `--api-key <KEY>` : Embedding API Key (Auth Token)ã€‚**å¯é€‰ï¼Œæ— é»˜è®¤å€¼ã€‚** è‹¥ API æ— éœ€éªŒè¯å¯ä¸ä¼ ã€‚

### 1. åŸºç¡€ç¯å¢ƒ
| å‘½ä»¤ | è¯´æ˜ |
| :--- | :--- |
| `init` | åˆå§‹åŒ–æ•°æ®åº“æ ¹ç›®å½•ç»“æ„ã€‚ |

### 2. è¡¨ç®¡ç† (Table Management)
| å‘½ä»¤ | è¯´æ˜ | ç¤ºä¾‹ |
| :--- | :--- | :--- |
| `table list` | [CSV] åˆ—å‡ºæ‰€æœ‰è¡¨åŠå…¶æ¡ç›®æ•°ã€‚ | `rag-core table list` |
| `table new <NAME>` | åˆ›å»ºä¸€ä¸ªæ–°è¡¨ã€‚å‚æ•°ï¼š`--dim <INT>` (ç»´åº¦), `--model <STR>` (å…³è”åµŒå…¥æ¨¡å‹å)ã€‚ | `rag-core table new papers --model qwen3-embedding-0.6b` |
| `table delete <NAME>` | åˆ é™¤æŒ‡å®šçš„è¡¨åŠå…³è”å…ƒæ•°æ®ã€‚ | `rag-core table delete old_cache` |
| `table info <NAME>` | [CSV] è¾“å‡ºæŒ‡å®šè¡¨çš„è¯¦ç»†ä¿¡æ¯ï¼šç»´åº¦ã€å…³è”æ¨¡å‹ã€æ¡ç›®æ•°ã€‚ | `rag-core table info main_lib` |

### 3. æ•°æ®æ“ä½œ (å¿…é¡»æŒ‡å®š `-t`)
| å‘½ä»¤ | è¯´æ˜ | ç¤ºä¾‹ |
| :--- | :--- | :--- |
| `ingest -t <TAB>` | å…¥åº“åˆ†å—ã€‚ | `rag-core ingest -t papers chunk.txt --name "p1"` |
| `query -t <TAB>` | [CSV] è¯­ä¹‰æŸ¥è¯¢ã€‚ | `rag-core query -t papers "åæŒ¯" -l 5` |
| `search -t <TAB>` | [CSV] æŒ‰ name ç²¾ç¡®æŸ¥æ‰¾åŒ¹é…çš„ ID åˆ—è¡¨ã€‚ | `rag-core search -t papers --name "p1"` |
| `delete -t <TAB>` | æŒ‰ ID åˆ é™¤ç‰¹å®šè®°å½•ã€‚ | `rag-core delete -t papers <id>` |
| `clear -t <TAB>` | æ¸…ç©ºè¡¨ä¸­æ‰€æœ‰æ•°æ®ã€‚ | `rag-core clear -t papers` |

---

## ğŸ“Š CSV è¾“å‡ºæ ¼å¼å®šä¹‰

æ‰€æœ‰è¾“å‡ºåˆ° `stdout` çš„æ•°æ®å‡åŒ…å« Header è¡¨å¤´ã€‚

---

## âš ï¸ å¼€å‘è€…è§„åˆ™
1. **ç¦æ­¢ç¡¬ç¼–ç **ï¼šAPI ç›¸å…³é…ç½®ç¦æ­¢è®¾ç½®é»˜è®¤å€¼ï¼Œå¿…é¡»æ˜¾å¼ä¼ å‚ã€‚
2. **Stdout çº¯å‡€æ€§**ï¼šstdout ä»…è¾“å‡º CSV æ•°æ®ï¼Œæ—¥å¿—ä¸é”™è¯¯è¾“å‡ºåˆ° stderrã€‚
